{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://openworld.dev/contracts/latency-init-schema-v1.json",
  "title": "OpenWorld Latency Init Payload v1",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "schema_version",
    "outbounds"
  ],
  "properties": {
    "schema_version": {
      "type": "integer",
      "const": 1
    },
    "outbounds": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/outboundConfig"
      }
    }
  },
  "$defs": {
    "outboundConfig": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "tag",
        "protocol",
        "settings"
      ],
      "properties": {
        "tag": {
          "type": "string",
          "minLength": 1
        },
        "protocol": {
          "type": "string",
          "minLength": 1
        },
        "settings": {
          "$ref": "#/$defs/outboundSettings"
        }
      }
    },
    "outboundSettings": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "address",
        "port"
      ],
      "properties": {
        "address": {
          "type": "string",
          "minLength": 1
        },
        "port": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535
        },
        "uuid": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "method": {
          "type": "string"
        },
        "security": {
          "type": "string"
        },
        "sni": {
          "type": "string"
        },
        "server_name": {
          "type": "string"
        },
        "fingerprint": {
          "type": "string"
        },
        "alpn": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "flow": {
          "type": "string"
        },
        "alter_id": {
          "type": "integer",
          "minimum": 0
        },
        "network": {
          "type": "string"
        },
        "up_mbps": {
          "type": "integer",
          "minimum": 0
        },
        "down_mbps": {
          "type": "integer",
          "minimum": 0
        },
        "auth_str": {
          "type": "string"
        },
        "server_ports": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "hop_interval": {
          "type": "string"
        },
        "obfs": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "type": {
              "type": "string"
            },
            "password": {
              "type": "string"
            }
          }
        },
        "tls": {
          "$ref": "#/$defs/tlsConfig"
        },
        "transport": {
          "$ref": "#/$defs/transportConfig"
        }
      }
    },
    "tlsConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "server_name": {
          "type": "string"
        },
        "sni": {
          "type": "string"
        },
        "fingerprint": {
          "type": "string"
        },
        "alpn": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "reality": {
          "$ref": "#/$defs/realityConfig"
        }
      }
    },
    "realityConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "public_key": {
          "type": "string",
          "minLength": 1
        },
        "short_id": {
          "type": "string"
        }
      }
    },
    "transportConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "minLength": 1
        },
        "path": {
          "type": "string"
        },
        "headers": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "service_name": {
          "type": "string"
        }
      }
    }
  }
}
